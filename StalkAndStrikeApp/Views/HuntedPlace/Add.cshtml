@model StalkAndStrikeApp.Models.HuntedPlaceViewModel

@{
    ViewData["Title"] = "Add Hunted Place";
}

<h2>Add Hunted Place</h2>

<form asp-action="Add" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="imageFile">Upload Image</label>
        <input type="file" asp-for="ImageFile" class="form-control" required />
    </div>

    <div class="form-group">
        <label for="map">Select Location</label>
        <div id="map" style="height: 400px; width: 100%;"></div>
        <input type="hidden" asp-for="Latitude" id="latitude" />
        <input type="hidden" asp-for="Longitude" id="longitude" />
    </div>

    <button type="submit" class="btn btn-primary">Save</button>
</form>

@section Scripts {
    <script>
        function initMap() {
            var defaultLocation = { lat: 37.7749, lng: -122.4194 }; // Default to San Francisco

            var map = new google.maps.Map(document.getElementById("map"), {
                center: defaultLocation,
                zoom: 8
            });

            var marker = new google.maps.Marker({
                position: defaultLocation,
                map: map,
                draggable: true
            });

            google.maps.event.addListener(marker, "dragend", function (event) {
                document.getElementById("latitude").value = event.latLng.lat();
                document.getElementById("longitude").value = event.latLng.lng();
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDepwK3JykS2cSY16pdy7NaXfA8oPPxfto&callback=initMap" async defer></script>
}